# =============================================================================
# TRM Referral Platform - Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control
# =============================================================================

# =============================================================================
# Core Application Configuration
# =============================================================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
API_URL=https://api.trm.io
APP_NAME=TRM Platform
APP_VERSION=1.0.0

# =============================================================================
# Security Configuration
# =============================================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-min-64-characters-long-for-production
JWT_ACCESS_SECRET=your-access-token-secret-min-64-characters
JWT_REFRESH_SECRET=your-refresh-token-secret-min-64-characters
JWT_EMAIL_SECRET=your-email-verification-secret-min-64-characters
JWT_RESET_SECRET=your-password-reset-secret-min-64-characters

# JWT Expiry Settings
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d
JWT_EMAIL_EXPIRY=24h
JWT_RESET_EXPIRY=1h

# Session Configuration
SESSION_SECRET=your-session-secret-min-32-characters
SESSION_TIMEOUT=3600

# Encryption Keys (32 chars for AES-256)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=your-32-character-encryption-key!!
ENCRYPTION_IV=your-16-char-iv-key!!
DB_ENCRYPTION_KEY=your-database-encryption-key-32chars!!

# CORS Configuration
CORS_ORIGIN=https://trm.io,https://app.trm.io,https://admin.trm.io
FRONTEND_URL=https://trm.io
ADMIN_URL=https://admin.trm.io

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSIVE=true

# =============================================================================
# Database Configuration (MongoDB)
# =============================================================================
# MongoDB Atlas or Self-Hosted
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/trm_production?retryWrites=true&w=majority
# Alternative formats supported:
# MONGO_URL=mongodb://...
# DATABASE_URL=mongodb://...

# MongoDB Connection Pool Settings
MONGODB_POOL_SIZE=50
MONGODB_MIN_POOL_SIZE=10
MONGODB_SERVER_SELECTION_TIMEOUT=30000
MONGODB_SOCKET_TIMEOUT=45000
MONGODB_HEARTBEAT_FREQUENCY=10000
MONGODB_RETRY_ATTEMPTS=5
MONGODB_RETRY_DELAY=3000

# =============================================================================
# Cache Configuration (Redis)
# =============================================================================
# Redis Cloud, AWS ElastiCache, or Self-Hosted
REDIS_URL=redis://:password@redis-host:6379/0
REDIS_PASSWORD=your-secure-redis-password
REDIS_HOST=redis-host
REDIS_PORT=6379
REDIS_DATABASE=0

# Redis Connection Settings
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_KEY_PREFIX=trm:

# Cache TTL Settings (in seconds)
CACHE_TTL_SHORT=300
CACHE_TTL_MEDIUM=1800
CACHE_TTL_LONG=86400
CACHE_TTL_SESSION=3600

# =============================================================================
# Email Service Configuration (SendGrid)
# =============================================================================
SENDGRID_API_KEY=SG.your-sendgrid-api-key
EMAIL_FROM_NAME=TRM Platform
EMAIL_FROM_ADDRESS=noreply@trm.io
EMAIL_REPLY_TO=support@trm.io
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USERNAME=apikey
SMTP_PASSWORD=your-sendgrid-api-key

# =============================================================================
# Payment Gateway Configuration
# =============================================================================
# Stripe
STRIPE_API_KEY=sk_live_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PUBLISHABLE_KEY=pk_live_your_publishable_key

# Myanmar Payment Providers (Enable as needed)
KBZPAY_ENABLED=false
KBZPAY_MERCHANT_ID=your-merchant-id
KBZPAY_API_KEY=your-api-key
KBZPAY_SECRET=your-secret

WAVEPAY_ENABLED=false
WAVEPAY_MERCHANT_ID=your-merchant-id
WAVEPAY_API_KEY=your-api-key

AYAPAY_ENABLED=false
AYAPAY_MERCHANT_ID=your-merchant-id
AYAPAY_API_KEY=your-api-key

# =============================================================================
# Messaging & Communication
# =============================================================================
# WhatsApp Business API
WHATSAPP_ENABLED=true
WHATSAPP_MOCK_MODE=true
WHATSAPP_API_KEY=your-whatsapp-api-key
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id
WHATSAPP_BUSINESS_ACCOUNT_ID=your-business-account-id
WHATSAPP_WEBHOOK_VERIFY_TOKEN=your-verify-token

# Viber
VIBER_ENABLED=true
VIBER_MOCK_MODE=true
VIBER_AUTH_TOKEN=your-viber-auth-token
VIBER_WEBHOOK_URL=https://api.trm.io/api/v1/messaging/viber/webhook

# Telegram
TELEGRAM_ENABLED=true
TELEGRAM_MOCK_MODE=true
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_WEBHOOK_URL=https://api.trm.io/api/v1/messaging/telegram/webhook

# SMS (Twilio)
TWILIO_ENABLED=false
TWILIO_ACCOUNT_SID=your-account-sid
TWILIO_AUTH_TOKEN=your-auth-token
TWILIO_PHONE_NUMBER=your-twilio-number

# =============================================================================
# Cloud Storage (AWS S3)
# =============================================================================
AWS_ACCESS_KEY_ID=your-access-key-id
AWS_SECRET_ACCESS_KEY=your-secret-access-key
AWS_REGION=ap-southeast-1
AWS_S3_BUCKET=trm-production-bucket
AWS_S3_ENDPOINT=s3.ap-southeast-1.amazonaws.com

# =============================================================================
# AI/ML Services
# =============================================================================
# OpenAI / Moonshot AI
OPENAI_API_KEY=sk-your-openai-api-key
MOONSHOT_API_KEY=your-moonshot-api-key
AI_MODEL=gpt-4
AI_MAX_TOKENS=2000
AI_TEMPERATURE=0.7

# =============================================================================
# Monitoring & Observability
# =============================================================================
# DataDog
DATADOG_ENABLED=false
DATADOG_API_KEY=your-datadog-api-key
DATADOG_APP_KEY=your-datadog-app-key

# Sentry
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production

# PagerDuty
PAGERDUTY_ENABLED=false
PAGERDUTY_KEY=your-pagerduty-integration-key

# =============================================================================
# Feature Flags
# =============================================================================
FEATURE_REFERRAL_NETWORK=true
FEATURE_KYC_VERIFICATION=true
FEATURE_PAYOUT_AUTOMATION=true
FEATURE_EMAIL_MARKETING=true
FEATURE_ANALYTICS_ADVANCED=true
FEATURE_WEBHOOKS=true
FEATURE_API_ACCESS=true
FEATURE_MOBILE_APP=true
FEATURE_WHATSAPP_INTEGRATION=true
FEATURE_ENTERPRISE_PLANS=true
FEATURE_SUBSCRIPTION_MANAGEMENT=true
FEATURE_COMPLIANCE_REPORTING=true
FEATURE_WORKFLOW_AUTOMATION=true

# =============================================================================
# File Upload Configuration
# =============================================================================
MAX_FILE_SIZE=10485760
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf
UPLOAD_PATH=./uploads

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true

# =============================================================================
# API Configuration
# =============================================================================
API_VERSION=v1
API_RATE_LIMIT_ENABLED=true
API_REQUEST_TIMEOUT=30000

# Internal Service Communication
INTERNAL_API_TOKEN=your-internal-service-token-secure-random-string

# =============================================================================
# Timezone & Localization
# =============================================================================
TZ=Asia/Rangoon
DEFAULT_LOCALE=en
SUPPORTED_LOCALES=en,my

# =============================================================================
# Deployment Flags
# =============================================================================
RENDER_ENVIRONMENT=false
RAILWAY_ENVIRONMENT=false
AUTO_SEED_ON_STARTUP=false
ENABLE_DEBUG_ROUTES=false
